<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "7c077988328ebfe33b24d07945f16eca",
  "translation_date": "2025-10-11T11:47:54+00:00",
  "source_file": "2-Regression/2-Data/README.md",
  "language_code": "et"
}
-->
# Ehita regressioonimudel Scikit-learniga: andmete ettevalmistamine ja visualiseerimine

![Andmete visualiseerimise infograafika](../../../../translated_images/data-visualization.54e56dded7c1a804d00d027543f2881cb32da73aeadda2d4a4f10f3497526114.et.png)

Infograafika autor: [Dasani Madipalli](https://twitter.com/dasani_decoded)

## [Eelloengu viktoriin](https://ff-quizzes.netlify.app/en/ml/)

> ### [See Ãµppetund on saadaval ka R-is!](../../../../2-Regression/2-Data/solution/R/lesson_2.html)

## Sissejuhatus

NÃ¼Ã¼d, kui sul on olemas tÃ¶Ã¶riistad, et alustada masinÃµppe mudelite loomist Scikit-learniga, oled valmis hakkama oma andmetele kÃ¼simusi esitama. Andmetega tÃ¶Ã¶tades ja ML-lahendusi rakendades on vÃ¤ga oluline osata esitada Ãµigeid kÃ¼simusi, et avada oma andmekogumi potentsiaal.

Selles Ãµppetunnis Ãµpid:

- Kuidas valmistada andmeid mudeli loomiseks.
- Kuidas kasutada Matplotlibi andmete visualiseerimiseks.

## Ã•ige kÃ¼simuse esitamine oma andmetele

KÃ¼simus, millele vastust otsid, mÃ¤Ã¤rab, millist tÃ¼Ã¼pi ML-algoritme sa kasutad. Vastuse kvaliteet sÃµltub suuresti sinu andmete olemusest.

Vaata [andmeid](https://github.com/microsoft/ML-For-Beginners/blob/main/2-Regression/data/US-pumpkins.csv), mis on selle Ãµppetunni jaoks ette nÃ¤htud. Sa saad avada selle .csv-faili VS Code'is. Kiire pilk nÃ¤itab kohe, et seal on tÃ¼hje kohti ja segu stringidest ning numbrilistest andmetest. Seal on ka kummaline veerg nimega 'Package', kus andmed on segu 'sacks', 'bins' ja muudest vÃ¤Ã¤rtustest. Tegelikult on andmed Ã¼sna segased.

[![ML algajatele - Kuidas analÃ¼Ã¼sida ja puhastada andmekogumit](https://img.youtube.com/vi/5qGjczWTrDQ/0.jpg)](https://youtu.be/5qGjczWTrDQ "ML algajatele - Kuidas analÃ¼Ã¼sida ja puhastada andmekogumit")

> ðŸŽ¥ KlÃµpsa Ã¼laloleval pildil, et vaadata lÃ¼hikest videot, mis kÃ¤sitleb andmete ettevalmistamist selle Ãµppetunni jaoks.

Tegelikult ei ole vÃ¤ga tavaline, et sulle antakse andmekogum, mis on tÃ¤iesti valmis ML-mudeli loomiseks. Selles Ãµppetunnis Ãµpid, kuidas valmistada ette toorandmeid, kasutades standardseid Python'i teeke. Samuti Ãµpid erinevaid tehnikaid andmete visualiseerimiseks.

## Juhtumiuuring: 'kÃµrvitsaturg'

Selles kaustas leiad .csv-faili juurkaustas `data`, nimega [US-pumpkins.csv](https://github.com/microsoft/ML-For-Beginners/blob/main/2-Regression/data/US-pumpkins.csv), mis sisaldab 1757 rida andmeid kÃµrvitsaturu kohta, rÃ¼hmitatuna linnade kaupa. Need on toorandmed, mis on saadud [Specialty Crops Terminal Markets Standard Reports](https://www.marketnews.usda.gov/mnp/fv-report-config-step1?type=termPrice) kaudu, mida levitab Ameerika Ãœhendriikide PÃµllumajandusministeerium.

### Andmete ettevalmistamine

Need andmed on avalikus domeenis. Neid saab alla laadida paljudes eraldi failides, iga linna kohta, USDA veebisaidilt. Et vÃ¤ltida liiga paljusid eraldi faile, oleme kÃµik linnade andmed Ã¼heks tabeliks kokku liitnud, seega oleme andmeid juba veidi _ette valmistanud_. JÃ¤rgmine samm on andmetele lÃ¤hemalt pilk heita.

### KÃµrvitsaandmed - esialgsed jÃ¤reldused

Mida sa nende andmete kohta mÃ¤rkad? Sa juba nÃ¤gid, et seal on segu stringidest, numbritest, tÃ¼hjadest kohtadest ja kummalistest vÃ¤Ã¤rtustest, mida tuleb mÃµista.

Millist kÃ¼simust sa vÃµiksid nendele andmetele esitada, kasutades regressioonitehnikat? NÃ¤iteks: "Prognoosi kÃµrvitsa mÃ¼Ã¼gihinda teatud kuu jooksul." Vaadates andmeid uuesti, on vaja teha mÃµned muudatused, et luua Ã¼lesande jaoks vajalik andmestruktuur.

## Harjutus - analÃ¼Ã¼si kÃµrvitsaandmeid

Kasutame [Pandas](https://pandas.pydata.org/) (nimi tÃ¤histab `Python Data Analysis`), mis on vÃ¤ga kasulik tÃ¶Ã¶riist andmete kujundamiseks, et analÃ¼Ã¼sida ja ette valmistada kÃµrvitsaandmeid.

### Esmalt kontrolli puuduvate kuupÃ¤evade olemasolu

Esmalt tuleb astuda samme, et kontrollida puuduvate kuupÃ¤evade olemasolu:

1. Konverteeri kuupÃ¤evad kuu formaati (need on USA kuupÃ¤evad, seega formaat on `MM/DD/YYYY`).
2. Ekstraheeri kuu uude veergu.

Ava _notebook.ipynb_ fail Visual Studio Code'is ja impordi tabel uude Pandase andmeraami.

1. Kasuta `head()` funktsiooni, et vaadata esimesi viit rida.

    ```python
    import pandas as pd
    pumpkins = pd.read_csv('../data/US-pumpkins.csv')
    pumpkins.head()
    ```

    âœ… Millist funktsiooni kasutaksid viimase viie rea vaatamiseks?

1. Kontrolli, kas praeguses andmeraamis on puuduvad andmed:

    ```python
    pumpkins.isnull().sum()
    ```

    Seal on puuduvad andmed, kuid vÃµib-olla see ei ole Ã¼lesande jaoks oluline.

1. Et muuta oma andmeraamiga tÃ¶Ã¶tamine lihtsamaks, vali ainult vajalikud veerud, kasutades `loc` funktsiooni, mis ekstraheerib algsest andmeraamist ridade (esimene parameeter) ja veergude (teine parameeter) grupi. Allpool olev vÃ¤ljend `:` tÃ¤hendab "kÃµik read".

    ```python
    columns_to_select = ['Package', 'Low Price', 'High Price', 'Date']
    pumpkins = pumpkins.loc[:, columns_to_select]
    ```

### Teiseks, mÃ¤Ã¤rake kÃµrvitsa keskmine hind

MÃµtle, kuidas mÃ¤Ã¤rata kÃµrvitsa keskmine hind teatud kuus. Milliseid veerge sa selleks Ã¼lesandeks valiksid? Vihje: sul on vaja 3 veergu.

Lahendus: arvuta `Low Price` ja `High Price` veergude keskmine, et tÃ¤ita uus Price veerg, ja konverteeri Date veerg, et nÃ¤idata ainult kuud. Ã•nneks, vastavalt Ã¼laltoodud kontrollile, ei ole kuupÃ¤evade vÃµi hindade osas puuduvat teavet.

1. Keskmise arvutamiseks lisa jÃ¤rgmine kood:

    ```python
    price = (pumpkins['Low Price'] + pumpkins['High Price']) / 2

    month = pd.DatetimeIndex(pumpkins['Date']).month

    ```

   âœ… VÃµid vabalt printida mis tahes andmeid, mida soovid kontrollida, kasutades `print(month)`.

2. NÃ¼Ã¼d kopeeri konverteeritud andmed uude Pandase andmeraami:

    ```python
    new_pumpkins = pd.DataFrame({'Month': month, 'Package': pumpkins['Package'], 'Low Price': pumpkins['Low Price'],'High Price': pumpkins['High Price'], 'Price': price})
    ```

    Kui prindid oma andmeraami vÃ¤lja, nÃ¤ed puhast ja korrastatud andmekogumit, mille pÃµhjal saad ehitada uue regressioonimudeli.

### Aga oota! Siin on midagi kummalist

Kui vaatad `Package` veergu, mÃ¼Ã¼akse kÃµrvitsaid mitmes erinevas konfiguratsioonis. MÃµned mÃ¼Ã¼akse '1 1/9 bushel' mÃµÃµtÃ¼hikutes, mÃµned '1/2 bushel' mÃµÃµtÃ¼hikutes, mÃµned kÃµrvitsa kaupa, mÃµned naela kaupa ja mÃµned suurtes kastides, mille laius varieerub.

> KÃµrvitsaid tundub olevat vÃ¤ga raske Ã¼htlaselt kaaluda

Originaalandmetesse sÃ¼venedes on huvitav, et kÃµik, mille `Unit of Sale` on 'EACH' vÃµi 'PER BIN', omavad ka `Package` tÃ¼Ã¼pi tolli, bin'i vÃµi 'each' kaupa. KÃµrvitsaid tundub olevat vÃ¤ga raske Ã¼htlaselt kaaluda, seega filtreerime need, valides ainult kÃµrvitsad, mille `Package` veerus on string 'bushel'.

1. Lisa filter faili algusesse, .csv importimise alla:

    ```python
    pumpkins = pumpkins[pumpkins['Package'].str.contains('bushel', case=True, regex=True)]
    ```

    Kui prindid andmed nÃ¼Ã¼d vÃ¤lja, nÃ¤ed, et saad ainult umbes 415 rida andmeid, mis sisaldavad kÃµrvitsaid bushel'i kaupa.

### Aga oota! Veel Ã¼ks asi, mida teha

Kas mÃ¤rkasid, et bushel'i kogus varieerub ridade kaupa? Pead hindade normaliseerimiseks tegema matemaatilisi arvutusi, et nÃ¤idata hinda bushel'i kohta.

1. Lisa need read pÃ¤rast plokki, mis loob new_pumpkins andmeraami:

    ```python
    new_pumpkins.loc[new_pumpkins['Package'].str.contains('1 1/9'), 'Price'] = price/(1 + 1/9)

    new_pumpkins.loc[new_pumpkins['Package'].str.contains('1/2'), 'Price'] = price/(1/2)
    ```

âœ… Vastavalt [The Spruce Eats](https://www.thespruceeats.com/how-much-is-a-bushel-1389308), bushel'i kaal sÃµltub toodangu tÃ¼Ã¼bist, kuna see on mahu mÃµÃµtÃ¼hik. "NÃ¤iteks tomatite bushel peaks kaaluma 56 naela... Lehed ja rohelised vÃµtavad rohkem ruumi vÃ¤hem kaaluga, seega spinati bushel on ainult 20 naela." See kÃµik on Ã¼sna keeruline! Ã„rgem vaevugem bushel'i-naela konversiooni tegemisega ja hinnastagem bushel'i kaupa. KÃµik see kÃµrvitsate bushel'ite uurimine nÃ¤itab aga, kui oluline on mÃµista oma andmete olemust!

NÃ¼Ã¼d saad analÃ¼Ã¼sida hinnaÃ¼hikut nende bushel'i mÃµÃµtÃ¼hiku alusel. Kui prindid andmed veel kord vÃ¤lja, nÃ¤ed, kuidas need on standardiseeritud.

âœ… Kas mÃ¤rkasid, et kÃµrvitsad, mida mÃ¼Ã¼akse pool-bushel'i kaupa, on vÃ¤ga kallid? Kas oskad vÃ¤lja selgitada, miks? Vihje: vÃ¤ikesed kÃµrvitsad on palju kallimad kui suured, tÃµenÃ¤oliselt seetÃµttu, et neid on bushel'is palju rohkem, arvestades Ã¼he suure ÃµÃµnsa pirukakÃµrvitsa poolt hÃµivatud kasutamata ruumi.

## Visualiseerimisstrateegiad

Andmeteadlase roll on nÃ¤idata andmete kvaliteeti ja olemust, millega ta tÃ¶Ã¶tab. Selleks luuakse sageli huvitavaid visualiseeringuid, nagu graafikud, diagrammid ja joonised, mis nÃ¤itavad andmete erinevaid aspekte. Nii on vÃµimalik visuaalselt nÃ¤idata seoseid ja lÃ¼nki, mida muidu oleks raske avastada.

[![ML algajatele - Kuidas visualiseerida andmeid Matplotlibiga](https://img.youtube.com/vi/SbUkxH6IJo0/0.jpg)](https://youtu.be/SbUkxH6IJo0 "ML algajatele - Kuidas visualiseerida andmeid Matplotlibiga")

> ðŸŽ¥ KlÃµpsa Ã¼laloleval pildil, et vaadata lÃ¼hikest videot, mis kÃ¤sitleb andmete visualiseerimist selle Ãµppetunni jaoks.

Visualiseeringud aitavad ka mÃ¤Ã¤rata, milline masinÃµppe tehnika on andmete jaoks kÃµige sobivam. NÃ¤iteks hajuvusdiagramm, mis nÃ¤ib jÃ¤rgivat joont, viitab sellele, et andmed sobivad hÃ¤sti lineaarse regressiooni harjutuseks.

Ãœks andmete visualiseerimise teek, mis tÃ¶Ã¶tab hÃ¤sti Jupyter'i mÃ¤rkmikes, on [Matplotlib](https://matplotlib.org/) (mida nÃ¤gid ka eelmises Ãµppetunnis).

> Saa rohkem kogemusi andmete visualiseerimisega [nendes juhendites](https://docs.microsoft.com/learn/modules/explore-analyze-data-with-python?WT.mc_id=academic-77952-leestott).

## Harjutus - katseta Matplotlibiga

Proovi luua mÃµned pÃµhilised graafikud, et kuvada just loodud andmeraami. Mida nÃ¤itaks pÃµhiline joongraafik?

1. Impordi Matplotlib faili algusesse, Pandase importimise alla:

    ```python
    import matplotlib.pyplot as plt
    ```

1. KÃ¤ivita kogu mÃ¤rkmik uuesti, et vÃ¤rskendada.
1. Lisa mÃ¤rkmiku lÃµppu lahter, et kuvada andmed kastina:

    ```python
    price = new_pumpkins.Price
    month = new_pumpkins.Month
    plt.scatter(price, month)
    plt.show()
    ```

    ![Hajuvusdiagramm, mis nÃ¤itab hinna ja kuu suhet](../../../../translated_images/scatterplot.b6868f44cbd2051c6680ccdbb1510697d06a3ff6cd4abda656f5009c0ed4e3fc.et.png)

    Kas see on kasulik graafik? Kas miski selles Ã¼llatab sind?

    See ei ole eriti kasulik, kuna see lihtsalt kuvab sinu andmed punktide hajuvusena antud kuus.

### Muuda see kasulikuks

Et graafikud kuvaksid kasulikke andmeid, tuleb andmeid tavaliselt kuidagi rÃ¼hmitada. Proovime luua graafiku, kus y-telg nÃ¤itab kuud ja andmed demonstreerivad andmete jaotust.

1. Lisa lahter, et luua rÃ¼hmitatud tulpdiagramm:

    ```python
    new_pumpkins.groupby(['Month'])['Price'].mean().plot(kind='bar')
    plt.ylabel("Pumpkin Price")
    ```

    ![Tulpdiagramm, mis nÃ¤itab hinna ja kuu suhet](../../../../translated_images/barchart.a833ea9194346d769c77a3a870f7d8aee51574cd1138ca902e5500830a41cbce.et.png)

    See on kasulikum andmete visualiseerimine! NÃ¤ib, et kÃµrvitsate kÃµrgeim hind esineb septembris ja oktoobris. Kas see vastab sinu ootustele? Miks vÃµi miks mitte?

---

## ðŸš€VÃ¤ljakutse

Uuri erinevaid visualiseerimise tÃ¼Ã¼pe, mida Matplotlib pakub. Millised tÃ¼Ã¼bid sobivad kÃµige paremini regressiooniprobleemide jaoks?

## [JÃ¤relloengu viktoriin](https://ff-quizzes.netlify.app/en/ml/)

## Ãœlevaade ja iseseisev Ãµpe

Vaata erinevaid viise andmete visualiseerimiseks. Koosta nimekiri erinevatest teekidest ja mÃ¤rgi, millised sobivad kÃµige paremini teatud tÃ¼Ã¼pi Ã¼lesannete jaoks, nÃ¤iteks 2D-visualiseeringud vs. 3D-visualiseeringud. Mida sa avastad?

## Ãœlesanne

[Visualiseerimise uurimine](assignment.md)

---

**Vastutusest loobumine**:  
See dokument on tÃµlgitud AI tÃµlketeenuse [Co-op Translator](https://github.com/Azure/co-op-translator) abil. Kuigi pÃ¼Ã¼ame tagada tÃ¤psust, palume arvestada, et automaatsed tÃµlked vÃµivad sisaldada vigu vÃµi ebatÃ¤psusi. Algne dokument selle algses keeles tuleks pidada autoriteetseks allikaks. Olulise teabe puhul soovitame kasutada professionaalset inimtÃµlget. Me ei vastuta arusaamatuste vÃµi valesti tÃµlgendamise eest, mis vÃµivad tuleneda selle tÃµlke kasutamisest.